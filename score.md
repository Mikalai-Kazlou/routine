# Описание фич приложения Routine (максимальный балл - 620)

*Для использования приложения в режиме инкогнито, необходимо разрешить использование cookie в настройках браузера, т.к. приложение использует cookie-аутентификацию. Либо воспользуйтесь стандартным режимом браузера Chrome*

*Пожалуйста, проверяйте работу приложения на максимальном для вашего устройства размере, но не менее 1400х780. Обратите внимание, что после изменения размера экрана (и открытии/закрытии консоли) требуется перезагрузка страницы.*


## Страница с часами (максимальный балл - 130)
- Блок создания мыслей
	- Можно создать мысль, открыв соответствующий редактор. Мысль создается, редактор закрывается (5 баллов)
	- Нажатие на Thoughts показывает список всех имеющихся мыслей (10 баллов)
	- Мысль можно закрыть, удалить или преобразовать в план (10 баллов)
- Часы
	- Часы показывают текущее время. Отображается текущая дата, иконка соответствует текущему времени суток, реализовано автоматическое обновление информации (15 баллов)
	- В центре круга отображается актуальная на данное время задача. Текст задачи можно редактировать. Фон и цвет текста задачи соответствует назначенным (10 баллов)
	- Задачи в центре часов автоматически обновляются при переходе на следующую по времени задачу (5 баллов)
	- Реализован график с задачами. Цвет и расположение каждого сектора на графике соответствует цвету и времени соответствующей задачи. Наведением курсора мыши на сектор часов можно просматривать задачи, назначенные на интересующее время. После отведения мыши задача меняется на текущую (15 баллов)	
	- Нажатие на AM-PM меняет график с задачами, расположенные на окружности часов, в соответствии с выбранным временем суток (после отведения курсора мыши с блока с часами значение и график возвращается к актуальному на данное время) (5 баллов)
- Анимация полета мыслей
	- Кол-во летающих мыслей меняется при создании и удалении и соответствует реальному кол-ву мыслей (5 баллов)
	- Мысли летают по случайной траектории в пределах окна браузера (15 баллов)
	- Мысли взаимодействуют друг с другом и с большими кругами (кнопка Week и часы). Отскакивают от них, притягиваются и имеют собственную физику (25 баллов)
	- Мысли плавно улетают при открытии окна мыслей и плавно возвращаются при закрытии (5 баллов)
    - Напоминание о необходимости подтвердить день для получения статистики
	- Отображается в назначенное время, если выбранный день еще не был подтвержден, на этот день были распределены планы и учетная запись уже была создана (5 баллов)


## Страница недели (максимальный балл - 115)
- В хедере отображается актуальная информация о заполненном времени недели (5 баллов)
- Есть полоса с графическим отображением заполнения недели. Шкала заполнения от большего к меньшему и имеет реальные пропорции (10 баллов)
- Можно создать или удалить план (10 баллов)
- Планы располагаются на странице «хаотично», но при перегрузке страницы остаются на своих местах (20 баллов)
- Размер плана пропорционален времени на него отведенному (5 баллов)
- План окрашен в соответствии с распределением времени. Окраска обновляется автоматически после любого изменения (10 баллов)
- Реализован Drag and Drop для удаления и назначения плана (20 баллов)
- При редактировании плана нельзя назначить время большее, чем есть  свободного в неделе и меньшее, чем есть свободного в плане. Также нельзя создать новый план, если в неделе нет свободного времени (10 баллов)
- Реализован Popup назначения плана на день. Интервал времени, доступного для назначения, учитывает свободное время в дне и нераспределенное время в плане (20 баллов)
- Реализованы попапы на случай, когда назначить план на день нельзя (5 баллов)


## Страница дня (максимальный балл - 110)
- В хедере отображается актуальная информация о заполненном времени дня (5 баллов)
- Можно создать план со страницы дня. При создании плана, он создается на странице недели и полностью назначается на день, с которого был создан (5 баллов)
- Можно «выбросить» план из дня. План при этом остается на странице недели, но его распределение с текущего дня снимается (5 баллов)
- Время плана можно увеличить и уменьшить. Нельзя уменьшить больше, чем на свободное время в текущем дне (которое не находится на шкале времени). Нельзя увеличить больше, чем на свободное время плана с странице недели. (5 баллов)
- Реализован блок с информацией о всех планах на день. Планы отсортированы от большего к меньшему и пропорционально соответствуют (5 баллов)
- Таймлайн (на чистом JS без библиотек)
	- Можно перетаскиванием добавить план на таймлайн. Начало плана соответствует положению курсора, конец плана ограничен другими планами, границами таймлайна или свободным временем плана (20 баллов)
	- Один план можно добавить несколько раз. Размер частей ограничен минимальным размером плана (15 минут) и свободным временем плана (10 баллов)
	- При добавлении плана на таймлайн динамически отображается интервал времени и место, занимаемые планом (10 баллов)
	- Можно перетягиванием менять размеры плана на таймлайне. При этом закрашивание плана обновляется автоматически (10 баллов)
	- Можно «выбросить» план из таймланы просто вытянув его (10 баллов)
	- Можно перемещать план по таймлану перетягиванием (20 баллов)
	- Реализовано удобное отображение интервалов времени маленьких планов (5 баллов)


## Popup создания и редактирования плана (максимальный балл - 40)
- Popup состоит из поля имени, поля текста, поля выбора времени и поля выбора цвета (5 баллов)
- Время можно ввести с помощью клавиатуры и с помощью слайдера. С помощью клавиатуры нельзя ввести неправильное время (вне допустимого интервала).  Слайдер и поля ввода синхронизированы (10 баллов)
- В блоке выбора цвета можно выбрать любой из представленных цветов. Цвет (и цвет шрифта, идущий в паре к нему) применяется к плану по всему приложению (10 баллов)
- После смены цвета весь popup перекрашивается в выбранные цвета (10 баллов)
- На странице недели при создании нового плана, если закрыть popup, то его текст и имя сохраняются в local Storage и востанавливаются при следующем открытии (5 баллов)
	
	
## Страница 404 (максимальный балл - 5)
- Страница 404 отображается при попытке перехода на несуществующую страницу и имеет кнопку «домой» (5 баллов)


## Логин и регистрация (максимальный балл - 40)
- Есть страница логина и регистрации. Переключение между ними плавное, со сохранением введенных данных (10 баллов)
- Есть возможность создавать уникальных пользователей  и переключаться между ними (10 баллов)
- Формы (за все формы 20 баллов)
	- Проверки на корректность ввода email 
	- Проверки на корректность ввода password  
	- Проверка совпадения паролей и проверка длины имени 
	- Если пользователь существует, но пароль неверный выдается ошибка «wrong password»
	- Если пользователь не зарегистрирован, выдается ошибка «cant't find this account» 
	- При попытке создать пользователя, который уже существует выдается ошибка «this user already exist» 
	- Есть стилизованный input <remember me>, меняющий срок действия токена с 1 дня на 7 дней 
	- При отправке формы проверяется корректность заполнения всех полей


## Страница подтверждения (максимальный балл - 30)
- На странице отображается список всех планов на установленный в настройках день (5 баллов)
- Время потраченное на план можно менять с помощью перетягивания и с помощью кнопок (20 баллов)
- При подтверждении уже подтвержденного дня появляется popup с предупреждением (5 баллов)


## Страница личного кабинета (максимальный балл - 30)
- На странице отображается имя пользователя и кол-во дней, с момента регистрации пользователя в приложении (5 баллов)
- Реализован блок с настройками. Можно изменить день подтверждения, время напоминания, имя пользователя, а также можно разлогиниться. (10 баллов)
- После изменения настроек появляется пульсирующая кнопка сохранения. После сохранения кнопка пропадает (5 баллов)
- На странице. отображается статистика, показывающая на сколько минут в день в среднем выполнение плана отклоняется от запланированного времени. Планы сортируются по соответствующим столбцам (Столбец "Fulfilled" имеет диапазон +/-15 мин от запланированного времени. Все, что выполняется меньше, попадает в столбец "Underfulfilled", больше - "Overfulfilled") (10 баллов)


## Сервер (максимальный балл - 100)
- Backend часть проекта реализована "с нуля" на Node.js с использованием Express-сервера (20 баллов)
- Подключена база данных MongoDB
	- Созданы схемы хранения данных, определены отношения между хранимыми в БД сущностями (5 баллов)
	- Используется ODM mongoose (5 баллов)
- Приложение разбито на микросервисы для работы с различными сущностями и использует несколько уровней абстракции (5 баллов)
- Реализована Cookie аутентификация
	- Cookie устанавливаются сервером и передаются от клиента к серверу автоматически при каждом запросе (5 баллов)
	- Реализовано middleware для обработки CORS политики. CORS политика не препятствует доступу к ресурсам из разрешенных источников, определенных заранее (5 баллов)
	- Обеспечены требования безопасности по хранению и передаче cookie (secure, httpOnly) (5 баллов)
- Для идентификации пользователя в системе используется JWT токен, реализована генерация и верификация JWT токена на основе секретного ключа (5 баллов)
- Пароли пользователей хранятся в БД в виде hash-значений (5 баллов)
- Сервер обрабатывает и отдаёт HTTP ошибки с body в едином формате в виде текстовых сообщений о том, что произошло (5 баллов)
- Сервер задеплоен на Heroku Cloud Application Platform (5 баллов)
- Реализованы REST API для следующих операций ([документация](https://github.com/lexarudak/routine/blob/notes/api.md)): 
	- Работа с пользователями (регистрация, login, logout, получение данных профиля, обновление данных профиля) (5 баллов)
	- Работа с мыслями (получение списка, получение по ID, создание, обновление, удаление, конвертация в план) (5 баллов)
	- Работа с планами (получение списка, получение по ID, создание, обновление, удаление) (5 баллов)
	- Работа с недельным распределением планов (получение агрегированных данных за неделю, внесение изменений в распределение) (5 баллов)
	- Работа с дневным распределением планов (получение агрегированных данных за день, внесение изменений в распределение) (5 баллов)
	- Работа со статистикой (получение агрегированных данных, проверка наличия подтверждения дня, подтверждение дня) (5 баллов)


## Общие требования (20 баллов)
- Приложение выполненено как SPA и работает без перезагрузки страницы (5 баллов)
- Можно попасть на любую из существющих страниц введя ее адрес в строку поиска (5 баллов)
- Все данные пользователя хранятся на сервере и постоянно синхронизируются (10 баллов)
